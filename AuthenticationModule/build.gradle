apply plugin: "spring-boot"

jar {
    baseName = "AuthenticationModule"
    version = "0.0.1-SNAPSHOT"
}

dependencies {
    compile project(':SharedModule')
}

springBoot {
    mainClass = "dawid.kotarba.authentication.AuthenticationModule"
}

task createPropertiesFile(dependsOn: processResources) << {
    storeProperties("$buildDir", decorateCommonProperties())
}

def decorateCommonProperties() {
    def props = createCommonProperties()
    props.setProperty('eureka.client.registerWithEureka', "false")
    props.setProperty('eureka.client.fetchRegistry', "false")
    props.setProperty('eureka.server.waitTimeInMsWhenSyncEmpty', "0")
    return props
}

classes {
    dependsOn createPropertiesFile
}